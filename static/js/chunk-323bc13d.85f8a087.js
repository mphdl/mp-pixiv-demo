(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-323bc13d"],{7205:function(t,e,a){"use strict";var i=a("75cc"),n=a.n(i);n.a},"75cc":function(t,e,a){},"789b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("div",{staticClass:"rank-radios"},[a("a-radio-group",{attrs:{"default-value":"day","button-style":"solid",size:"large"},on:{change:t.handleSubmit}},[a("a-radio-button",{attrs:{value:"day"}},[t._v(" 日榜 ")]),a("a-radio-button",{attrs:{value:"week"}},[t._v(" 周榜 ")]),a("a-radio-button",{attrs:{value:"month"}},[t._v(" 月榜 ")])],1)],1),a("div",{staticClass:"rank-main"},[a("a-row",{ref:"picsRow"},t._l(t.tempUrlArr,(function(e,i){return a("a-col",{key:"card"+i,attrs:{span:4}},[a("a-card",{staticStyle:{width:"90%","margin-bottom":"30px"},attrs:{hoverable:"",bodyStyle:{"white-space":"nowrap"}},on:{click:function(a){t.openImg("https://pximg.pixiv-viewer.workers.dev"+e.image_urls.large.slice(e.image_urls.large.indexOf("/c/")))}}},[a("img",{attrs:{slot:"cover",src:"https://pximg.pixiv-viewer.workers.dev"+e.image_urls.square_medium.slice(e.image_urls.square_medium.indexOf("/c/"))},slot:"cover"}),a("a-card-meta",{attrs:{title:e.id}},[a("template",{slot:"description"},[t._v(t._s(e.title))])],2)],1)],1)})),1),a("div",{staticClass:"search-tips"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rankParam.isRun,expression:"!rankParam.isRun"}]},[t._v("正在加载0v0~")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isResultUndifined,expression:"isResultUndifined"}]},[t._v("再怎么搜也没有了辣>_<~")])])],1)])},n=[],s=(a("caad"),a("b0c0"),a("d3b7"),a("2532"),a("82ae")),r=a.n(s),l={name:"Rank",data:function(){return{rankParam:{isComplete:!1,isRun:!0},rankType:"day",page:1,tempUrlArr:[],isResultUndifined:!1,scrollInterval:{}}},created:function(){this.getPics()},activated:function(){var t=this;this.scrollInterval=setInterval((function(){t.scrollevent()}),5e3),document.addEventListener("scroll",this.scrollevent)},deactivated:function(){clearInterval(this.scrollInterval),document.removeEventListener("scroll",this.scrollevent)},computed:{filteredTags:function(){return this.$store.state.filteredTags}},methods:{handleSubmit:function(t){this.tempUrlArr=[],this.page=1,this.rankParam.isComplete=!1,this.rankParam.isRun=!0,this.isResultUndifined=!1,this.rankType=t.target.value,this.getPics()},getPics:function(){var t=this;if(!this.rankParam.isComplete&&this.rankParam.isRun){this.rankParam.isRun=!1;var e="https://api.imjad.cn/pixiv/v2/?type=rank&mode="+this.rankType+"&page="+this.page,a=this;r.a.get(e).then((function(e){if(e.data.error)return a.page++,a.rankParam.isRun=!0,void a.getPics();0==e.data.illusts.length?(a.isResultUndifined=!0,a.rankParam.isComplete=!0):a.isResultUndifined=!1;for(var i=0;i<e.data.illusts.length;i++)t.checkTags(e.data.illusts[i].tags)||a.tempUrlArr.push(e.data.illusts[i]);a.page++})).catch((function(t){console.log(t)})).finally((function(){setTimeout((function(){a.rankParam.isRun=!0}),1e3)}))}},openImg:function(t){window.open(t,"_blank")},checkTags:function(t){for(var e=0;e<t.length;e++)if(this.filteredTags.includes(t[e].name))return!0;return!1},scrollevent:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>a-150&&this.getPics()}}},o=l,c=(a("7205"),a("2877")),u=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-323bc13d.85f8a087.js.map