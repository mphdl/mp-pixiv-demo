(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-073b81ee"],{"255b":function(t,e,a){},"2d3b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search"},[a("a-form-model",{staticStyle:{padding:"10px 0"},attrs:{layout:"inline",model:t.rankParam},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",[a("a-input",{staticStyle:{width:"500px",height:"50px","font-size":"20px"},attrs:{placeholder:"参数"},model:{value:t.rankParam.param,callback:function(e){t.$set(t.rankParam,"param",e)},expression:"rankParam.param"}})],1),a("a-form-model-item",[a("a-button",{staticStyle:{width:"80px",height:"50px","font-size":"20px"},attrs:{type:"primary","html-type":"submit",disabled:""===t.rankParam.param}},[t._v("搜索")])],1)],1),a("div",{staticClass:"search-main"},[a("a-row",{ref:"picsRow"},t._l(t.tempUrlArr,(function(e,i){return a("a-col",{key:"card"+i,attrs:{span:4}},[a("a-card",{staticStyle:{width:"90%","margin-bottom":"30px"},attrs:{hoverable:"",bodyStyle:{"white-space":"nowrap"}},on:{click:function(a){t.openImg("https://pximg.pixiv-viewer.workers.dev"+e.image_urls.large.slice(e.image_urls.large.indexOf("/c/")))}}},[a("img",{attrs:{slot:"cover",src:"https://pximg.pixiv-viewer.workers.dev"+e.image_urls.square_medium.slice(e.image_urls.square_medium.indexOf("/c/"))},slot:"cover"}),a("a-card-meta",{attrs:{title:e.id}},[a("template",{slot:"description"},[t._v(t._s(e.title))])],2)],1)],1)})),1),a("div",{staticClass:"search-tips"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.rankParam.isRun&&!t.isResultUndifined,expression:"!rankParam.isRun && !isResultUndifined"}]},[t._v("正在加载0v0~")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.isResultUndifined,expression:"isResultUndifined"}]},[t._v("再怎么搜也没有了辣>_<~")])])],1)],1)},n=[],s=(a("caad"),a("b0c0"),a("d3b7"),a("2532"),a("82ae")),r=a.n(s),l={name:"Search",data:function(){return{rankParam:{param:"",isComplete:!1,isRun:!0},page:1,tempUrlArr:[],isResultUndifined:!1,scrollInterval:{}}},created:function(){this.rankParam.param="原神",this.handleSubmit()},activated:function(){var t=this;this.scrollInterval=setInterval((function(){t.scrollevent()}),5e3),document.addEventListener("scroll",this.scrollevent)},deactivated:function(){clearInterval(this.scrollInterval),document.removeEventListener("scroll",this.scrollevent)},computed:{filteredTags:function(){return this.$store.state.filteredTags}},methods:{handleSubmit:function(){this.tempUrlArr=[],this.page=1,this.rankParam.isComplete=!1,this.rankParam.isRun=!0,this.isResultUndifined=!1,this.getPics()},getPics:function(){var t=this;if(!this.rankParam.isComplete&&this.rankParam.isRun){this.rankParam.isRun=!1;var e="https://api.imjad.cn/pixiv/v2/?type=search&word="+this.rankParam.param+"&page="+this.page,a=this;r.a.get(e).then((function(e){if(e.data.error)return a.page++,a.rankParam.isRun=!0,void a.getPics();0==e.data.illusts.length?(a.isResultUndifined=!0,a.rankParam.isComplete=!0):a.isResultUndifined=!1;for(var i=0;i<e.data.illusts.length;i++)t.checkTags(e.data.illusts[i].tags)||a.tempUrlArr.push(e.data.illusts[i]);a.page++})).catch((function(t){console.log(t)})).finally((function(){setTimeout((function(){a.rankParam.isRun=!0}),1e3)}))}},openImg:function(t){window.open(t,"_blank")},checkTags:function(t){for(var e=0;e<t.length;e++)if(this.filteredTags.includes(t[e].name))return!0;return!1},scrollevent:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>a-150&&this.getPics()}}},o=l,c=(a("6b75"),a("2877")),m=Object(c["a"])(o,i,n,!1,null,null,null);e["default"]=m.exports},"6b75":function(t,e,a){"use strict";var i=a("255b"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-073b81ee.414cf239.js.map